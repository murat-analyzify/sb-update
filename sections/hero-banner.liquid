{%- liquid
  assign text_position = section.settings.text_position
  assign text_alignment = section.settings.text_alignment
  assign mobile_display_mode = section.settings.mobile_display_mode
  assign color_scheme = section.settings.color_scheme
  assign bg_image = section.settings.background_image

  assign heading = section.settings.heading
  assign text = section.settings.text
  assign button_label = section.settings.button_label
  assign button_link = section.settings.button_link

  assign justify_content_value = 'flex-start'
  if text_position contains 'center'
    assign justify_content_value = 'center'
  elsif text_position contains 'right'
    assign justify_content_value = 'flex-end'
  endif

  assign align_items_value = 'center'
  if text_position contains 'bottom'
    assign align_items_value = 'flex-end'
  endif
  if text_position contains 'top'
    assign align_items_value = 'flex-start'
  endif
-%}

<style>
  .hero-banner {
    --text-alignment: {{ text_alignment }};
  }

  .hero-banner__content-wrapper {
    display: flex;
    padding: 4rem;
    width: 100%;
    height: 730px;
    background-size: cover;
    background-position: center;
    position: relative; 
  }

  .hero-banner__text-block {
    display: flex;
    flex-direction: column;
    width: 100%;
    max-width: 500px;
    position: relative;
    z-index: 2;
  }

  .hero-banner__heading {
    font-size: 3rem;
    margin-bottom: 0.5rem;
  }

  .hero-banner__text {
    font-size: 14px;
    margin-bottom: 1.5rem;
    line-height: 120%;
  }

  .hero-banner__mobile-image {
    display: none;
  }

  .hero-banner__button {
    align-items: center;
    padding-bottom: 13px;
    padding-top: 13px;
    font-size: 14px;
  }

  /* Mobile css */
  @media (max-width: 768px) {
    .hero-banner__content-wrapper {
      height: auto;
      min-height: 450px;
      padding: 1.5rem;
    }

    .hero-banner__heading {
      font-size: 24px;
      line-height: 120%;
    }

    .hero-banner--mobile-separate {
       display: flex;
       flex-direction: column;
       height: 65vh; 
    }

    .hero-banner--mobile-separate .hero-banner__content-wrapper {
      background-image: none !important;
      min-height: auto;
      align-items: center;
      justify-content: center;
      padding: 24px 16px;
      flex-shrink: 0;
    }

    .hero-banner--mobile-separate .hero-banner__mobile-image {
      display: block;
      width: 100%;
      flex-grow: 1; 
      object-fit: cover;
      min-height: 0; 
    }

    .hero-banner--mobile-separate .hero-banner__text-block {
       text-align: center;
    }

    .hero-banner__button {
      width: 100%;
      font-size: 14px;
      letter-spacing: 0.03em;
      line-height: 100%;
    }
    
    .hero-banner:not(.hero-banner--mobile-separate) .hero-banner__content-wrapper::after {
        content: '';
        position: absolute;
        left: 0;
        right: 0;
        bottom: 0;
        top: 0;
        z-index: 1;
        background: linear-gradient(to top, rgba(0, 0, 0, 0.65) 0%, rgba(0, 0, 0, 0.4) 50%, transparent 65%);
      }
  }
</style>

<section class="color-{{ color_scheme }} hero-banner {% if mobile_display_mode == 'separate' %}hero-banner--mobile-separate{% endif %}">

  {%- if mobile_display_mode == 'separate' and bg_image != blank -%}
    <img
      src="{{ bg_image | image_url: width: 800 }}"
      alt="{{ bg_image.alt | default: 'Hero banner image' | escape }}"
      class="hero-banner__mobile-image"
      width="{{ bg_image.width }}"
      height="{{ bg_image.height }}"
      loading="lazy"
    >
  {%- endif -%}

  <div
    class="hero-banner__content-wrapper"
    style="
      {% if bg_image != blank %}background-image: url('{{ bg_image | image_url: width: 2000 }}');{% endif %}
      justify-content: {{ justify_content_value }};
      align-items: {{ align_items_value }};
    "
  >
    <div
      class="hero-banner__text-block"
      style="
        text-align: {{ text_alignment }};
        align-items: {% if text_alignment == 'left' %}flex-start{% elsif text_alignment == 'center' %}center{% else %}flex-end{% endif %};
      "
    >
      {%- if heading != blank -%}
        <h2 class="hero-banner__heading">{{ heading | escape }}</h2>
      {%- endif -%}

      {%- if text != blank -%}
        <div class="hero-banner__text">{{ text }}</div>
      {%- endif -%}

      {%- if button_label != blank -%}
        <a href="{{ button_link | default: '#' }}" class="button hero-banner__button">
          {{ button_label | escape }}
        </a>
      {%- endif -%}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Hero Banner Section",
  "tag": "section",
  "class": "section--full-width",
  "settings": [
    {
      "type": "image_picker",
      "id": "background_image",
      "label": "Background Image"
    },
    {
      "type": "select",
      "id": "text_position",
      "label": "Text & Button Position",
      "info": "Block placement on hero image",
      "options": [
        { "value": "top_left", "label": "Top Left" },
        { "value": "top_center", "label": "Top Center" },
        { "value": "top_right", "label": "Top Right" },
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right", "label": "Right" },
        { "value": "bottom_left", "label": "Bottom Left" },
        { "value": "bottom_center", "label": "Bottom Center" },
        { "value": "bottom_right", "label": "Bottom Right" }
      ],
      "default": "bottom_left"
    },
    {
      "type": "select",
      "id": "text_alignment",
      "label": "Text & Button Alignment",
      "info": "Alignment within the text block",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right", "label": "Right" }
      ],
      "default": "left"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color Scheme",
      "default": "scheme-5"
    },
    {
      "type": "radio",
      "id": "mobile_display_mode",
      "label": "Mobile Image Display Mode",
      "options": [
        { "value": "background", "label": "Image as Background" },
        { "value": "separate", "label": "Image as Separate Block" }
      ],
      "default": "background"
    },
    {
      "type": "header",
      "content": "Content Settings"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "FALL IS BACK"
    },
    {
      "type": "richtext",
      "id": "text",
      "label": "Text",
      "default": "<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.onec arcu nulla, consectetur eu convallis a, feugiat facilisis mi.</p>"
    },
    {
      "type": "text",
      "id": "button_label",
      "label": "Button Label",
      "default": "SHOP THE COLLECTION"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Button Link"
    }
  ],
  "presets": [
    {
      "name": "Hero Banner"
    }
  ]
}
{% endschema %}