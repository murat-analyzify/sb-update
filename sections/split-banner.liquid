{%- liquid
  assign layout_type = section.settings.layout_type
  assign image_side = section.settings.image_side
  assign layout_ratio = section.settings.layout_ratio
  assign text_alignment = section.settings.text_alignment
  assign content_position = section.settings.content_position

  assign image_1 = section.settings.image_1
  assign image_2 = section.settings.image_2

  assign color_scheme = section.settings.color_scheme

  assign heading = section.settings.heading
  assign eyebrow = section.settings.eyebrow
  assign subheading = section.settings.subheading
  assign button_text = section.settings.button_text
  assign button_url = section.settings.button_url

  assign image_col_order_class = 'split-banner__column--order-1'
  assign text_col_order_class = 'split-banner__column--order-2'

  if image_side == 'right'
    assign image_col_order_class = 'split-banner__column--order-2'
    assign text_col_order_class = 'split-banner__column--order-1'
  endif
-%}

<style>
  #split-banner-{{ section.id }} {
    --color-scheme: {{ color_scheme }};
  }
  .split-banner {
    display: grid;
    min-height: 800px;
    position: relative;
  }
  .split-banner--ratio-1-1 {
    grid-template-columns: 1fr 1fr;
  }
  .split-banner--ratio-1-2 {
    grid-template-columns: 1fr 2fr;
  }
  .split-banner--ratio-2-1 {
    grid-template-columns: 2fr 1fr;
  }

  .split-banner__column {
    position: relative;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    justify-content: center;
  }
  .split-banner__image {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
  .split-banner__overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1;
  }
  .split-banner__column--order-1 {
    order: 1;
  }
  .split-banner__column--order-2 {
    order: 2;
  }

  /* Content alignment for "Image + Text" */
  .split-banner__column--text {
    padding: 40px;
  }
  .split-banner--text-align-left .split-banner__column--text {
    align-items: flex-start;
  }
  .split-banner--text-align-center .split-banner__column--text {
    align-items: center;
  }
  .split-banner--text-align-right .split-banner__column--text {
    align-items: flex-end;
  }

  .split-banner__text-content {
    position: relative;
    z-index: 2;
    max-width: 500px;
    width: 100%;
  }
  .split-banner--text-align-left .split-banner__text-content {
    text-align: left;
  }
  .split-banner--text-align-center .split-banner__text-content {
    text-align: center;
  }
  .split-banner--text-align-right .split-banner__text-content {
    text-align: right;
  }

  .split-banner__text-content-overlay-wrapper {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 2;
    display: flex;
    padding: 48px 80px;
    pointer-events: none;
  }
  .split-banner__text-content-overlay-wrapper .split-banner__text-content {
    pointer-events: auto;
    width: 413px;
    max-width: 100%;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 24px;
  }

  /* horizontal alignment */
  .split-banner--content-pos-top-left .split-banner__text-content-overlay-wrapper,
  .split-banner--content-pos-center-left .split-banner__text-content-overlay-wrapper,
  .split-banner--content-pos-bottom-left .split-banner__text-content-overlay-wrapper {
    justify-content: flex-start;
  }

  .split-banner--content-pos-top-center .split-banner__text-content-overlay-wrapper,
  .split-banner--content-pos-center-center .split-banner__text-content-overlay-wrapper,
  .split-banner--content-pos-bottom-center .split-banner__text-content-overlay-wrapper {
    justify-content: center;
  }

  .split-banner--content-pos-top-right .split-banner__text-content-overlay-wrapper,
  .split-banner--content-pos-center-right .split-banner__text-content-overlay-wrapper,
  .split-banner--content-pos-bottom-right .split-banner__text-content-overlay-wrapper {
    justify-content: flex-end;
  }

  /* vertical alignment */
  .split-banner--content-pos-top-left .split-banner__text-content-overlay-wrapper,
  .split-banner--content-pos-top-center .split-banner__text-content-overlay-wrapper,
  .split-banner--content-pos-top-right .split-banner__text-content-overlay-wrapper {
    align-items: flex-start;
  }

  .split-banner--content-pos-center-left .split-banner__text-content-overlay-wrapper,
  .split-banner--content-pos-center-center .split-banner__text-content-overlay-wrapper,
  .split-banner--content-pos-center-right .split-banner__text-content-overlay-wrapper {
    align-items: center;
  }

  .split-banner--content-pos-bottom-left .split-banner__text-content-overlay-wrapper,
  .split-banner--content-pos-bottom-center .split-banner__text-content-overlay-wrapper,
  .split-banner--content-pos-bottom-right .split-banner__text-content-overlay-wrapper {
    align-items: flex-end;
  }

  .split-banner--layout-image_image.split-banner--text-align-left .split-banner__text-content,
  .split-banner--layout-image_image.split-banner--text-align-left .split-banner__text-content-inner {
    align-items: flex-start;
  }
  .split-banner--layout-image_image.split-banner--text-align-left .split-banner__text-content {
    text-align: left;
  }

  .split-banner--layout-image_image.split-banner--text-align-center .split-banner__text-content,
  .split-banner--layout-image_image.split-banner--text-align-center .split-banner__text-content-inner {
    align-items: center;
  }
  .split-banner--layout-image_image.split-banner--text-align-center .split-banner__text-content {
    text-align: center;
  }

  .split-banner--layout-image_image.split-banner--text-align-right .split-banner__text-content,
  .split-banner--layout-image_image.split-banner--text-align-right .split-banner__text-content-inner {
    align-items: flex-end;
  }
  .split-banner--layout-image_image.split-banner--text-align-right .split-banner__text-content {
    text-align: right;
  }

  .split-banner__text-content-inner {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 8px;
    width: 100%;
  }
  .split-banner--layout-image_image .split-banner__heading {
    font-weight: 700;
    font-size: 48px;
    line-height: 120%;
    letter-spacing: -0.01em;
    text-transform: uppercase;
    margin: 0;
  }


  .split-banner--layout-image_image .split-banner__eyebrow {
    font-weight: 400;
    font-size: 16px;
    line-height: 130%;
    letter-spacing: -1%;
    margin: 2px 0px;
  }
  .split-banner--layout-image_image .split-banner__subheading {
    font-weight: 400;
    font-size: 14px;
    line-height: 130%;
    margin: 0;
  }
  .split-banner--layout-image_image .split-banner__subheading p {
    line-height: 120%;
    font-size: 14px;
    margin: 0;
  }
  .split-banner--layout-image_image .split-banner__button {
    font-size: 14px;
  }
  .split-banner__heading {
    font-size: 2.5rem;
    margin-bottom: 8px;
    line-height: 120%;
    margin-top: 0;
    color: var(--color-foreground-heading);
  }
  .split-banner__subheading {
    font-size: 14px;
    margin-bottom: 24px;
  }
  .split-banner__button {
    display: inline-block;
    padding: 12px 24px;
    text-decoration: none;
    text-transform: uppercase;
  }

  .split-banner__eyebrow {
    font-family: 'ButlerPro';
    font-weight: 500;
    font-size: 16px;
    margin-bottom: 2px;
    line-height: 130%;
    letter-spacing: -1%;
    margin: 8px 0px;
    color: var(--color-foreground-heading);
  }

  @media (max-width: 768px) {
    .split-banner,
    .split-banner--ratio-1-1,
    .split-banner--ratio-1-2,
    .split-banner--ratio-2-1 {
      grid-template-columns: 1fr;
    }
    
    .split-banner__column--image {
      order: 1 !important;
    }

    /* "Image + Text" */
    .split-banner--layout-image_text {
      min-height: auto;
    }
    .split-banner--layout-image_text .split-banner__image {
      height: 300px;
    }
    .split-banner--layout-image_text .split-banner__column {
      height: 300px;
    }
    .split-banner--layout-image_text .split-banner__column--order-2 {
      max-height: 250px!important;
    }
    .split-banner--layout-image_text .split-banner__column--text {
      order: 2 !important;
      padding: 0px 20px 0px;
    }
    .split-banner--layout-image_text .split-banner__text-content {
      max-width: 100%;
      display: flex;
      flex-direction: column;
    }
    .split-banner--layout-image_text.split-banner--text-align-left .split-banner__text-content { align-items: flex-start; text-align: left; }
    .split-banner--layout-image_text.split-banner--text-align-center .split-banner__text-content { align-items: center; text-align: center; }
    .split-banner--layout-image_text.split-banner--text-align-right .split-banner__text-content { align-items: flex-end; text-align: right; }
    .split-banner--layout-image_text .split-banner__eyebrow {
      font-size: 16px;
      margin-bottom: 2px;
      line-height: 120%;
      letter-spacing: -1%;
    }
    .split-banner--layout-image_text .split-banner__heading {
      font-size: 24px;
      line-height: 120%;
      margin-bottom: 0;
      margin-bottom: 8px;
    }
    .split-banner--layout-image_text .split-banner__subheading {
      font-size: 14px;
      line-height: 120%;
      margin-bottom: 16px;
    }
    .split-banner--layout-image_text .split-banner__subheading p {
      margin: 0;
    }
    .split-banner--layout-image_text .split-banner__button {
      display: block;
      width: 100%;
      text-align: center;
      padding-top: 16px;
      padding-bottom: 16px;
    }

    /* "Image + Image" */
    .split-banner--layout-image_image .split-banner__text-content-overlay-wrapper {
      top: auto;
      left: 20px;
      right: 20px;
      bottom: 20px;
      width: auto;
      height: auto;
      padding: 0;
      justify-content: center;
      align-items: center;
    }
    .split-banner--layout-image_image {
      min-height: 600px;
    }
    .split-banner__button { width: 100%; }
    .split-banner--layout-image_image .split-banner__text-content {
      align-items: center;
      text-align: center;
    }
    .split-banner--layout-image_image .split-banner__image {
      height: 600px;
    }
    .split-banner__text-content-inner {
      align-items: center;
    }
    .split-banner__text-content-inner .split-banner__heading {
      font-size: 24px;
      line-height: 120%;
      letter-spacing: -1%;
    }
    
    .split-banner__text-content-inner .split-banner__subheading {
      font-size: 14px;
      line-height: 130%;
      font-weight: 400;
    }
    .split-banner--layout-image_image .split-banner__column:nth-child(2) {
      display: none;
    }
  }
</style>


<div
  id="split-banner-{{ section.id }}"
  class="split-banner color-{{ color_scheme }}  split-banner--ratio-{{ layout_ratio | replace: ':', '-' }} split-banner--image-side-{{ image_side }} split-banner--layout-{{ layout_type }} split-banner--text-align-{{ text_alignment }} split-banner--content-pos-{{ content_position | replace: '_', '-' }}"
>
  {%- if layout_type == 'image_text' -%}
    <div class="split-banner__column split-banner__column--text {{ text_col_order_class }}">
      <div class="split-banner__text-content">
        {%- if eyebrow != blank -%}
          <h2 class="split-banner__eyebrow">{{ eyebrow }}</h2>
        {%- endif -%}
        {%- if heading != blank -%}
          <h2 class="split-banner__heading">{{ heading }}</h2>
        {%- endif -%}
        {%- if subheading != blank -%}
          <div class="split-banner__subheading">{{ subheading }}</div>
        {%- endif -%}
        {%- if button_text != blank and button_url != blank -%}
          <a href="{{ button_url }}" class="button split-banner__button">{{ button_text }}</a>
        {%- endif -%}
      </div>
    </div>
    <div class="split-banner__column split-banner__column--image {{ image_col_order_class }}">
      {% if image_1 != blank -%}
        <img
          class="split-banner__image"
          src="{{ image_1 | image_url: width: 1200 }}"
          alt="{{ image_1.alt | escape }}"
          width="{{ image_1.width }}"
          height="{{ image_1.height }}"
          loading="lazy"
        >
      {%- else -%}
        {{- 'image' | placeholder_svg_tag: 'placeholder-svg' -}}
      {%- endif %}
      {% if section.settings.overlay_1_enable %}
        <div
          class="split-banner__overlay"
          style="background-color: {{ section.settings.overlay_1_color | color_modify: 'alpha', section.settings.overlay_1_opacity }};"
        ></div>
      {% endif %}
    </div>

  {%- else -%}
    <div class="split-banner__column">
      {% if image_1 != blank -%}
        <img
          class="split-banner__image"
          src="{{ image_1 | image_url: width: 1000 }}"
          alt="{{ image_1.alt | escape }}"
          width="{{ image_1.width }}"
          height="{{ image_1.height }}"
          loading="lazy"
        >
      {%- else %}
        {{- 'image' | placeholder_svg_tag: 'placeholder-svg' -}}
      {% endif %}
      {% if section.settings.overlay_1_enable %}
        <div
          class="split-banner__overlay"
          style="background-color: {{ section.settings.overlay_1_color | color_modify: 'alpha', section.settings.overlay_1_opacity }};"
        ></div>
      {% endif %}
    </div>
    <div class="split-banner__column">
      {% if image_2 != blank -%}
        <img
          class="split-banner__image"
          src="{{ image_2 | image_url: width: 1000 }}"
          alt="{{ image_2.alt | escape }}"
          loading="lazy"
          width="{{ image_2.width }}"
          height="{{ image_2.height }}"
        >
      {%- else %}
        {{- 'image' | placeholder_svg_tag: 'placeholder-svg' -}}
      {% endif %}
      {% if section.settings.overlay_2_enable %}
        <div
          class="split-banner__overlay"
          style="background-color: {{ section.settings.overlay_2_color | color_modify: 'alpha', section.settings.overlay_2_opacity }};"
        ></div>
      {% endif %}
    </div>

    <div class="split-banner__text-content-overlay-wrapper">
      <div class="split-banner__text-content">
        <div class="split-banner__text-content-inner">
          {%- if eyebrow != blank -%}
            <h2 class="split-banner__eyebrow">{{ eyebrow }}</h2>
          {%- endif -%}
          {%- if heading != blank -%}
            <h2 class="split-banner__heading">{{ heading }}</h2>
          {%- endif -%}
          {%- if subheading != blank -%}
            <div class="split-banner__subheading">{{ subheading }}</div>
          {%- endif -%}
        </div>
        {%- if button_text != blank and button_url != blank -%}
          <a href="{{ button_url }}" class="button split-banner__button">{{ button_text }}</a>
        {%- endif -%}
      </div>
    </div>
  {%- endif -%}
</div>

{% schema %}
{
  "name": "Split Banner",
  "tag": "section",
  "class": "section section--full-width",
  "settings": [
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color Scheme",
      "default": "scheme-1"
    },
    { "type": "header", "content": "Content" },
    { "type": "text", "id": "heading", "label": "Heading", "default": "Ski Essentials for Him" },
    { "type": "text", "id": "eyebrow", "label": "Eyebrow", "default": "Brand Spotlight" },
    {
      "type": "richtext",
      "id": "subheading",
      "label": "Subheading / Rich Text",
      "default": "<p>Elevate your skiing experience with our sophisticated Ski Collection. Discover comfort and elegance in every descent.</p>"
    },
    { "type": "text", "id": "button_text", "label": "Button Text", "default": "Shop Men's Skiwear" },
    { "type": "url", "id": "button_url", "label": "Button URL" },
    { "type": "header", "content": "Layout" },
    {
      "type": "select",
      "id": "layout_type",
      "label": "Layout Type",
      "options": [
        { "value": "image_text", "label": "Image + Text" },
        { "value": "image_image", "label": "Image + Image" }
      ],
      "default": "image_text"
    },
    {
      "type": "select",
      "id": "layout_ratio",
      "label": "Layout Ratio",
      "options": [
        { "value": "1:1", "label": "1:1" },
        { "value": "1:2", "label": "1:2" },
        { "value": "2:1", "label": "2:1" }
      ],
      "default": "2:1"
    },
    {
      "type": "select",
      "id": "text_alignment",
      "label": "Text Alignment",
      "info": "Used only in 'Image + Text' layout.",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right", "label": "Right" }
      ],
      "default": "center"
    },
    { "type": "header", "content": "Layout: Image + Text" },
    {
      "type": "select",
      "id": "image_side",
      "label": "Image Position",
      "info": "Changes the position of the image column.",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "right", "label": "Right" }
      ],
      "default": "left"
    },
    { "type": "header", "content": "Layout: Image + Image" },
    {
      "type": "select",
      "id": "content_position",
      "label": "Content Position",
      "info": "Used only in 'Image + Image' layout. Positions the text over the entire banner.",
      "options": [
        { "value": "top-left", "label": "Top Left" },
        { "value": "top-center", "label": "Top Center" },
        { "value": "top-right", "label": "Top Right" },
        { "value": "center-left", "label": "Center Left" },
        { "value": "center-center", "label": "Center" },
        { "value": "center-right", "label": "Center Right" },
        { "value": "bottom-left", "label": "Bottom Left" },
        { "value": "bottom-center", "label": "Bottom Center" },
        { "value": "bottom-right", "label": "Bottom Right" }
      ],
      "default": "bottom-left"
    },
    { "type": "header", "content": "Image 1 (Left / Primary Image)" },
    {
      "type": "image_picker",
      "id": "image_1",
      "label": "Image",
      "info": "This image is used for the left column in 'Image+Image' mode, and is the primary image for 'Image+Text' mode."
    },
    { "type": "checkbox", "id": "overlay_1_enable", "label": "Enable Overlay", "default": false },
    { "type": "color", "id": "overlay_1_color", "label": "Overlay Color", "default": "#000000" },
    {
      "type": "range",
      "id": "overlay_1_opacity",
      "label": "Overlay Opacity",
      "min": 0,
      "max": 1,
      "step": 0.1,
      "default": 0.3
    },
    { "type": "header", "content": "Image 2 (Right)" },
    {
      "type": "image_picker",
      "id": "image_2",
      "label": "Image",
      "info": "This image is only used for the right column when 'Layout Type' is 'Image + Image'."
    },
    { "type": "checkbox", "id": "overlay_2_enable", "label": "Enable Overlay", "default": false },
    { "type": "color", "id": "overlay_2_color", "label": "Overlay Color", "default": "#000000" },
    {
      "type": "range",
      "id": "overlay_2_opacity",
      "label": "Overlay Opacity",
      "min": 0,
      "max": 1,
      "step": 0.1,
      "default": 0.3
    }
  ],
  "presets": [{ "name": "Split Banner" }]
}
{% endschema %}