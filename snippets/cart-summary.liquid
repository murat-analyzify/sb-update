{% stylesheet %}
  .cart-actions {
    display: flex;
    flex-direction: column;
    gap: var(--gap-2xs);
   width: 100%;
   align-items: start;
  }

  .cart__summary-totals:not(:has(.cart-actions)) {
    /* margin-block-start: var(--margin-3xs);
    border-block-start: 1px solid var(--color-border);  */
    /* padding-block-start: var(--margin-xl); */
  }

  .cart__installments {
    color: var(--color-foreground);
  }
  .cart-note__summary{
    padding-block: 0;
    margin-block: 0
}

  .cart__ctas-buttons {
    display: flex;
    gap: var(--gap-xs);
    width: 100%;
    margin-bottom: 12px;
  }

  .cart__ctas-buttons .button {
    flex: 1;
    min-height: 48px;
  }

  /* Cart sayfasında view cart butonu olmadığında checkout butonu tam genişlikte olsun */
  .cart__ctas-buttons:has(.cart__checkout-button:only-child) .cart__checkout-button {
    width: 100%;
  }

  .cart__view-cart-button {
    background-color: transparent;
    border: 1px solid var(--color-button-primary);
    color: var(--color-button-primary);
  }

  .cart__view-cart-button:hover {
    background-color: var(--color-button-primary);
  }
  a.cart__view-cart-button.button{
    border: 1px solid black;
  }
  
{% endstylesheet %}

<div class="cart__summary-totals">
  {% # We need to keep this node in place to allow morphing to work properly # %}
  <div class="cart__original-total-container cart-primary-typography">
    {%- if cart.cart_level_discount_applications.size > 0 -%}
      <span class="cart__summary-item cart__original-total">
        <span class="cart__original-total-label">{{ 'content.cart_subtotal' | t }}</span>
        <span class="cart__original-total-value cart-secondary-typography">
          {{- cart.original_total_price | money -}}
        </span>
      </span>
      <div class="cart__summary-discounts">
        <ul
          class="discounts list-unstyled"
          role="list"
          aria-label="{{ 'content.discounts' | t }}"
        >
          {%- for discount in cart.cart_level_discount_applications -%}
            <li class="cart__summary-item cart__discount">
              <span class="cart__discount-label">
                {{- 'icon-discount.svg' | inline_asset_content -}}
                {{ discount.title | escape }}
              </span>
              <span class="cart__discount-value cart-secondary-typography"
                >-{{ discount.total_allocated_amount | money -}}
              </span>
            </li>
          {%- endfor -%}
        </ul>
      </div>
    {%- endif -%}
  </div>


  {%- liquid
    if settings.currency_code_enabled_cart_total
      assign total_price = cart.total_price | money_with_currency
    else
      assign total_price = cart.total_price | money
    endif

    assign total_price = total_price | remove: ' USD'
  -%}

  <div class="cart__total-container">
    <span
      class="cart__summary-item cart__total"
      role="status"
    >
      <span class="cart__total-label cart-primary-typography">{{ 'content.cart_subtotal' | t }}</span>
      <text-component
        ref="cartTotal"
        value="{{ total_price }}"
        class="cart__total-value cart-secondary-typography"
        {% comment %} Used by payment_terms web component {% endcomment %}
        data-cart-subtotal
      >
        {{ total_price }}
      </text-component>
    </span>
    
    {%- liquid
      assign total_saving = 0.00
      for item in cart.items
        if item.variant.compare_at_price > item.variant.price
          assign saving = item.variant.compare_at_price | minus: item.variant.price | times: item.quantity
          assign total_saving = saving | plus: total_saving
        endif
      endfor
      assign total_discount_amount = total_saving | plus: cart.total_discount
    -%}
   
      <span class="cart__summary-item cart__discount-total">
        <span class="cart__discount-total-label cart-primary-typography">Total savings</span>
        <span class="cart__discount-total-value cart-secondary-typography">
          {{ total_discount_amount | money_with_currency }}
        </span>
      </span>
      {% render 'rewards', items: cart.items, display: 'summary' %}
   
    {% if settings.show_installments %}
      <span class="cart__summary-item cart__installments">
        {% form 'cart', cart %}
          {{ form | payment_terms }}
        {% endform %}
      </span>
    {% endif %}
   
  </div>
</div>
{% render 'cart-discount' %}
<div class="cart__summary-item tax-note cart-primary-typography">
  {% comment %} {% render 'tax-info', has_discounts_enabled: settings.show_add_discount_code %} {% endcomment %}
  {{ 'content.shipping_sale_info' | t }}
</div>
{% if settings.show_cart_note%}
  <div class="cart-actions">   
      {% render 'cart-note' %}

  </div>
{% endif %}

<div class="cart__ctas">
  <div class="cart__ctas-buttons">
    {% unless template.name == 'cart' %}
      <a
        href="{{ routes.cart_url }}"
        class="cart__view-cart-button button"
        {% if cart == empty %}
          style="pointer-events: none; opacity: 0.5;"
        {% endif %}
      >
        {{ 'content.view_cart' | t }}
      </a>
    {% endunless %}
    
    <button
      type="submit"
      id="checkout"
      class="cart__checkout-button button"
      name="checkout"
      {% if cart == empty %}
        disabled
      {% endif %}
      form="cart-form"
    >
      {{ 'content.checkout' | t }}
    </button>
  </div>

  {% if additional_checkout_buttons and settings.show_accelerated_checkout_buttons and template.name == 'cart' %}
    <div class="additional-checkout-buttons additional-checkout-buttons--horizontal">
      {{ content_for_additional_checkout_buttons }}
    </div>
  {% endif %}
</div>
